{{ template "base" . }}

{{ define "title" }} Pipelines {{ end }}

{{ define "breadcrumb" }}
<ol class="breadcrumb">
	<li class="breadcrumb-item active" aria-current="page">Pipelines</li>
</ol>
{{ end }}

{{ define "main" }}

<h2 class="h1">Pipelines</h2>

<table class="table">
	<thead>
		<th>Name</th>
		<th>Next Run</th>
		<th>Last Run</th>
		<th>History</th>
		<th>Actions</th>
	</thead>
	<tbody>
{{ range .Pipelines }}
		<tr class="align-middle">
			<td>{{ .Name }}</td>
			<td><time>{{ .NextRun }}</time></td>
			<td><time>{{ .LastRun }}</time></td>
			<td>
	{{ range .History }}
				<a href="pipeline_instance?id={{.Id}}" class="{{.Status}}">#</a>
	{{ end }}
			</td>
			<td>
				<form method="post" action="run">
					<input type="hidden" name="name" value="{{ .Name }}" />
					<input class="btn btn-sm btn-outline-primary" type="submit" value="Run" />
				</form>
			</td>
		</tr>
{{ end }}
	</tbody>
</table>
{{ end }}
